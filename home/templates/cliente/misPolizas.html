{% extends 'layouts/baseCliente.html' %}
{% load static %}
{% block content %}
<section id="clientes">
    <h3>Mis pólizas</h3>
</section>
<div id="general">
    <div class="filtrar">
        <section>
            <p>{{ polizas.aseguradora.nombre }}</p>
            <h4>Filtrar pólizas</h4>
        </section>
        <div class="filtrar-items">
            <div>
                <section>
                    <label for="insurer">Aseguradora:</label>
                    <select name="insurer">
                        <option value="SBS Seguros Colombia S.A">SBS Seguros Colombia S.A</option>
                        <option value="BBVA Seguros">BBVA Seguros</option>
                        <option value="CHUBB">CHUBB</option>
                        <option value="Aurora">Aurora</option>
                        <option value="HDI Seguros S.A">HDI Seguros S.A</option>
                        <option value="La Previsora">La Previsora</option>
                    </select>
                </section>
                <section>
                    <label for="typeInsurance">Tipo de seguro:</label>
                    <select name="typeInsurance">
                        <option value="Generales">Generales</option>
                        <option value="Hogar y copropiedad">Hogar y copropiedad</option>
                        <option value="Obligatorios">Obligatorios</option>
                        <option value="Vida">De vida</option>
                        <option value="Responsabilidad civil contractual y extracontractual">Responsabilidad civil contractual y extracontractual</option>
                    </select>
                </section>
            </div>
            <div>
                <section>
                    <label for="startDate">Fecha de inicio:</label>
                    <input class="date" name="startDate" type="date"></input>
                </section>
                <section>
                    <label for="expiryDate">Fecha de vencimiento:</label>
                    <input class="date" name="expiryDate" type="date"></input>
                </section>
            </div>    
        </div>
        <div class="butons">
            <button><strong>Filtrar</strong></button>
            <button id="button-color-other"><strong>Limpiar</strong></button>
        </div>   
    </div>
    <section id="buscar" class="sec-buscar">
        <label for="buscar">Buscar:</label>
        <input name="buscar" type="text"></input>
    </section>
    <table>
        <thead class="polizas">
            <tr>
                <th>Número</th>
                <th>Aseguradora</th>
                <th>Tipo de seguro</th>
                <th class="space">Seguro</th>
                <th>Fecha de inicio</th>
                <th>Fecha de vencimiento</th>
                <th>Prima</th>
                <th>Valor prima</th>
                <th>Medio de pago</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody class="polizas">
            {% for poliza in polizas %}
            <tr id="datos">
                <td class="space">{{ poliza.id }}</td>
                <td>{{ poliza.aseguradora_id.nombre }}</td>
                <td>{{ poliza.seguro_id.tipo_seguro_id.nombre }}</td>
                <td>{{ poliza.seguro_id.nombre }}</td>
                <td>{{ poliza.fecha_inicio }}</td>
                <td>{{ poliza.fecha_vencimiento }}</td>
                <td>{{ poliza.prima }}</td>
                <td>{{ poliza.valor }}</td>
                <td>{{ poliza.medio_pago }}</td>
                {% if poliza.estado == True %}
                <td>Activa</td>
                {% else %}
                <td>Inactiva</td>
                {% endif %}
                <td>
                    <div class="boton-menu">
                        <button class="boton" class="options"><strong>Opciones</strong><i class="flecha"></i></button>
                        <ul class="menu-desplegable">                               
                            <button id="show-beneficiarios" class="icono-options options">
                                <figure>
                                    <img src="{% static 'assets/people.png' %}"    alt="icono">
                                </figure>
                                <p>Beneficiarios</p>
                            </button>  
                            <script>
                                document.getElementById("show-beneficiarios").onclick = function() {
                                    location.href = "{% url 'cliente_mis_beneficiarios' %}";
                                };
                            </script>                         
                        </ul>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<script>
    const botonesMenu = document.querySelectorAll('.boton');
    botonesMenu.forEach(boton => {
      boton.addEventListener('click', function () {
        const menuDesplegable = boton.nextElementSibling;
        menuDesplegable.style.display = menuDesplegable.style.display === 'block' ? 'none' : 'block';}); });
    </script>
{% endblock %}